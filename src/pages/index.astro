---
import { Image } from "astro:assets"
import { discordUrl, hyprthemeUrl, projectsUrl } from "#lib/consts"
import hyprthemeIcon from "#assets/icons/hyprtheme.svg"
import hyprRsBanner from "#assets/images/hyprland-rs_banner.webp"
import pyprlandBanner from "#assets/images/pyprland-banner.webp"
import FancyTitle from "#components/FancyTitle.astro"
import Button from "#components/Button.astro"
import Layout from "#layouts/HomeLayout.astro"
import Logo from "#assets/logo.svg"
import hyprthemeBanner from "#assets/images/hyprtheme_banner.webp"
import projectsBanner from "#assets/images/projects_banner.webp"
import bg from "#assets/images/bg.webp"
import FancyButton from "#components/FancyButton.astro"
import ProjectCard from "#components/homepage/ProjectCard.astro"
import ProjectContent from "#components/homepage/ProjectContent.astro"
import ProjectBanner from "#components/homepage/ProjectBanner.astro"
import ProjectLogo from "#components/homepage/ProjectLogo.astro"
import ProjectBody from "#components/homepage/ProjectBody.astro"

const projects: {
  name: string
  url: string
  icon?: string
  banner?: string
  button: string
  description: string
  listClass?: string
}[] = [
  {
    name: "Pyprland",
    description: "Scratchpads & many goodies for Hyprland",
    url: "https://github.com/hyprland-community/pyprland",
    banner: pyprlandBanner.src,
    button: "Python!",
    listClass: "xl:col-span-4",
  },
  {
    name: "hyprland-rs",
    description: "Rust for Hyprland's IPC",
    url: "https://github.com/hyprland-community/hyprland-rs",
    banner: hyprRsBanner.src,
    button: "Check out",
  },
  {
    name: "Hyprtheme",
    url: hyprthemeUrl,
    icon: hyprthemeIcon.src,
    banner: hyprthemeBanner.src,
    button: "Cook rice",
    description: "Install themes easily (WIP)",
  },
  {
    name: "All projects",
    description: "Browse through all our projects",
    url: projectsUrl,
    banner: projectsBanner.src,
    button: "Explore",
    listClass: "xl:col-span-4",
  },
]
---

<Layout title="Welcome to the Hyprland Community.">
  <main
    class="flex min-h-[max(52rem,calc(100vh-8rem))] w-full min-w-0 flex-col items-center justify-center gap-8 p-4 md:gap-12 md:p-8"
  >
    <img src={Logo.src} alt="Hyprland Community Logo" class="size-80" />

    <FancyTitle
      label="Hyprland Community"
      colors={["#0ee7f6", "#00237a", "#00A2F8"]}
    />

    <p
      class="mb-6 text-center text-lg font-bold text-slate-300 lg:text-xl xl:text-2xl"
    >
      A place where people work together to create awesome things for Hyprland
    </p>

    <FancyButton
      class="z-10"
      label="Join our Discord"
      href={discordUrl}
      type="link"
      newTab={true}
    />

    <div
      class="pointer-events-none absolute inset-x-0 top-0 -z-10 h-[900px] min-h-screen opacity-90 mix-blend-screen"
      aria-hidden="true"
    >
      <Image src={bg} alt="" class="h-full w-full" />
    </div>
  </main>

  <ul
    class="z-20 mx-auto mb-24 grid w-full max-w-screen-3xl grid-cols-1 justify-center gap-4 px-8 lg:gap-5 lg:px-12 xl:grid-cols-6 xl:gap-8"
  >
    {
      projects.map(
        ({ button, listClass, description, name, url, banner, icon }) => (
          <li class={listClass ?? "col-span-2"}>
            <ProjectCard>
              <ProjectBody>
                <ProjectContent
                  slot="content"
                  name={name}
                  description={description}
                >
                  <Button url={url} slot="button">
                    {button}
                  </Button>
                </ProjectContent>
                {icon && (
                  <ProjectLogo
                    name={name}
                    src={icon}
                    hasBanner={true}
                    slot="logo"
                  />
                )}
                {banner && <ProjectBanner slot="banner" src={banner} />}
              </ProjectBody>
            </ProjectCard>
          </li>
        ),
      )
    }
  </ul>

  <section
    class="flex h-[50vh] max-h-[45rem] min-h-96 w-full flex-col items-center justify-center gap-8"
  >
    <div class="flex flex-col gap-6">
      <h2 class="text-center text-5xl font-bold">
        Website is still under construction
      </h2>
      <p class="text-center font-medium">
        Stay up to date and join us! Maybe you have ideas of what we can put
        here
      </p>
    </div>

    <FancyButton
      class="z-10"
      label="Join our Discord"
      href={discordUrl}
      type="link"
      newTab={true}
    />
  </section>
</Layout>
